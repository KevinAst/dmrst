var app=function(){"use strict";if(!Error.prototype.defineUserMsg){Error.prototype.defineUserMsg=function(t){return this.userMsg=t,this.expected=!0,this},Error.prototype.userMsg="Unexpected Condition",Error.prototype.isExpected=function(){return this.expected},Error.prototype.expected=!1,Error.prototype.isUnexpected=function(){return!this.expected},Error.prototype.defineAttemptingToMsg=function(t){return this.attemptingToMsg?this.attemptingToMsg+=`, -and- ${t}`:this.attemptingToMsg+=` ... attempting to: ${t}`,this},Error.prototype.attemptingToMsg="",Error.prototype.formatUserMsg=function(){return this.userMsg+this.attemptingToMsg};const t=Error.prototype.toString;Error.prototype.toString=function(){return t.call(this)+"\n\nUser Msg: "+this.formatUserMsg()}}const t=Object.create(null);t.open="0",t.close="1",t.ping="2",t.pong="3",t.message="4",t.upgrade="5",t.noop="6";const e=Object.create(null);Object.keys(t).forEach((n=>{e[t[n]]=n}));const n={type:"error",data:"parser error"},s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),r="function"==typeof ArrayBuffer,i=({type:e,data:n},i,c)=>{return s&&n instanceof Blob?i?c(n):o(n,c):r&&(n instanceof ArrayBuffer||(a=n,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer))?i?c(n):o(new Blob([n]),c):c(t[e]+(n||""));var a},o=(t,e)=>{const n=new FileReader;return n.onload=function(){const t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<c.length;t++)a[c.charCodeAt(t)]=t;const u="function"==typeof ArrayBuffer,l=(t,s)=>{if("string"!=typeof t)return{type:"message",data:p(t,s)};const r=t.charAt(0);if("b"===r)return{type:"message",data:h(t.substring(1),s)};return e[r]?t.length>1?{type:e[r],data:t.substring(1)}:{type:e[r]}:n},h=(t,e)=>{if(u){const n=(t=>{let e,n,s,r,i,o=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);const l=new ArrayBuffer(o),h=new Uint8Array(l);for(e=0;e<c;e+=4)n=a[t.charCodeAt(e)],s=a[t.charCodeAt(e+1)],r=a[t.charCodeAt(e+2)],i=a[t.charCodeAt(e+3)],h[u++]=n<<2|s>>4,h[u++]=(15&s)<<4|r>>2,h[u++]=(3&r)<<6|63&i;return l})(t);return p(n,e)}return{base64:!0,data:t}},p=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t,d=String.fromCharCode(30);function f(t){if(t)return function(t){for(var e in f.prototype)t[e]=f.prototype[e];return t}(t)}f.prototype.on=f.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},f.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},f.prototype.off=f.prototype.removeListener=f.prototype.removeAllListeners=f.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,s=this._callbacks["$"+t];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<s.length;r++)if((n=s[r])===e||n.fn===e){s.splice(r,1);break}return 0===s.length&&delete this._callbacks["$"+t],this},f.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){s=0;for(var r=(n=n.slice(0)).length;s<r;++s)n[s].apply(this,e)}return this},f.prototype.emitReserved=f.prototype.emit,f.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},f.prototype.hasListeners=function(t){return!!this.listeners(t).length};const g="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function m(t,...e){return e.reduce(((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e)),{})}const y=setTimeout,v=clearTimeout;function b(t,e){e.useNativeTimers?(t.setTimeoutFn=y.bind(g),t.clearTimeoutFn=v.bind(g)):(t.setTimeoutFn=setTimeout.bind(g),t.clearTimeoutFn=clearTimeout.bind(g))}class C extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class w extends f{constructor(t){super(),this.writable=!1,b(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e,n){return super.emitReserved("error",new C(t,e,n)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=l(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const $="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),k={};let S,x=0,E=0;function R(t){let e="";do{e=$[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function I(){const t=R(+new Date);return t!==S?(x=0,S=t):t+"."+R(x++)}for(;E<64;E++)k[$[E]]=E;function O(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}let _=!1;try{_="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}const A=_;function N(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||A))return new XMLHttpRequest}catch(t){}if(!e)try{return new(g[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function T(){}const F=null!=new N({xdomain:!1}).responseType;class L extends f{constructor(t,e){super(),b(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=m(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new N(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},e.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=L.requestsCount++,L.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=T,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete L.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(L.requestsCount=0,L.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",M);else if("function"==typeof addEventListener){addEventListener("onpagehide"in g?"pagehide":"unload",M,!1)}function M(){for(let t in L.requests)L.requests.hasOwnProperty(t)&&L.requests[t].abort()}const U="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),B=g.WebSocket||g.MozWebSocket,P="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const j={websocket:class extends w{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,n=P?{}:m(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=P?new B(t,e,n):e?new B(t,e):new B(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],s=e===t.length-1;i(n,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(t){}s&&U((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=I()),this.supportsBinary||(t.b64=1);const s=O(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(s.length?"?"+s:"")}check(){return!!B}},polling:class extends w{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=F&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((t,e)=>{const n=t.split(d),s=[];for(let t=0;t<n.length;t++){const r=l(n[t],e);if(s.push(r),"error"===r.type)break}return s})(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((t,e)=>{const n=t.length,s=new Array(n);let r=0;t.forEach(((t,o)=>{i(t,!1,(t=>{s[o]=t,++r===n&&e(s.join(d))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=I()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);const s=O(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(s.length?"?"+s:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new L(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)})),this.pollXhr=t}}},D=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,V=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function q(t){const e=t,n=t.indexOf("["),s=t.indexOf("]");-1!=n&&-1!=s&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));let r=D.exec(t||""),i={},o=14;for(;o--;)i[V[o]]=r[o]||"";return-1!=n&&-1!=s&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(t,e){const n=/\/{2,9}/g,s=e.replace(n,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||s.splice(0,1);"/"==e.substr(e.length-1,1)&&s.splice(s.length-1,1);return s}(0,i.path),i.queryKey=function(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,s){e&&(n[e]=s)})),n}(0,i.query),i}class z extends f{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=q(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=q(e.host).host),b(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function(t){let e={},n=t.split("&");for(let t=0,s=n.length;t<s;t++){let s=n[t].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new j[t](n)}open(){let t;if(this.opts.rememberUpgrade&&z.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(t){let e=this.createTransport(t),n=!1;z.priorWebsocketSuccess=!1;const s=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",(t=>{if(!n)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;z.priorWebsocketSuccess="websocket"===e.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}})))};function r(){n||(n=!0,u(),e.close(),e=null)}const i=t=>{const n=new Error("probe error: "+t);n.transport=e.name,r(),this.emitReserved("upgradeError",n)};function o(){i("transport closed")}function c(){i("socket closed")}function a(t){e&&t.name!==e.name&&r()}const u=()=>{e.removeListener("open",s),e.removeListener("error",i),e.removeListener("close",o),this.off("close",c),this.off("upgrading",a)};e.once("open",s),e.once("error",i),e.once("close",o),this.once("close",c),this.once("upgrading",a),e.open()}onOpen(){if(this.readyState="open",z.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(t+="string"==typeof(e=s)?function(t){let e=0,n=0;for(let s=0,r=t.length;s<r;s++)e=t.charCodeAt(s),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(s++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}var e;return this.writeBuffer}write(t,e,n){return this.sendPacket("message",t,e,n),this}send(t,e,n){return this.sendPacket("message",t,e,n),this}sendPacket(t,e,n,s){if("function"==typeof e&&(s=e,e=void 0),"function"==typeof n&&(s=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:t,data:e,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():t()})):this.upgrading?n():t()),this}onError(t){z.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let n=0;const s=t.length;for(;n<s;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}z.protocol=4;const H="function"==typeof ArrayBuffer,G=Object.prototype.toString,W="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===G.call(Blob),Y="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===G.call(File);function J(t){return H&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||W&&t instanceof Blob||Y&&t instanceof File}function K(t,e){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let e=0,n=t.length;e<n;e++)if(K(t[e]))return!0;return!1}if(J(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return K(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&K(t[e]))return!0;return!1}function X(t){const e=[],n=t.data,s=t;return s.data=Z(n,e),s.attachments=e.length,{packet:s,buffers:e}}function Z(t,e){if(!t)return t;if(J(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=Z(t[s],e);return n}if("object"==typeof t&&!(t instanceof Date)){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=Z(t[s],e));return n}return t}function Q(t,e){return t.data=tt(t.data,e),t.attachments=void 0,t}function tt(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=tt(t[n],e);else if("object"==typeof t)for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=tt(t[n],e));return t}var et;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(et||(et={}));class nt extends f{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t),e.type===et.BINARY_EVENT||e.type===et.BINARY_ACK?(this.reconstructor=new st(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else{if(!J(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(void 0===et[n.type])throw new Error("unknown packet type "+n.type);if(n.type===et.BINARY_EVENT||n.type===et.BINARY_ACK){const s=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const r=t.substring(s,e);if(r!=Number(r)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===t.charAt(e+1)){const s=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}n.nsp=t.substring(s,e)}else n.nsp="/";const s=t.charAt(e+1);if(""!==s&&Number(s)==s){const s=e+1;for(;++e;){const n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}n.id=Number(t.substring(s,e+1))}if(t.charAt(++e)){const s=this.tryParse(t.substr(e));if(!nt.isPayloadValid(n.type,s))throw new Error("invalid payload");n.data=s}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case et.CONNECT:return"object"==typeof e;case et.DISCONNECT:return void 0===e;case et.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case et.EVENT:case et.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case et.ACK:case et.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class st{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=Q(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var rt=Object.freeze({__proto__:null,protocol:5,get PacketType(){return et},Encoder:class{constructor(t){this.replacer=t}encode(t){return t.type!==et.EVENT&&t.type!==et.ACK||!K(t)?[this.encodeAsString(t)]:(t.type=t.type===et.EVENT?et.BINARY_EVENT:et.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==et.BINARY_EVENT&&t.type!==et.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=X(t),n=this.encodeAsString(e.packet),s=e.buffers;return s.unshift(n),s}},Decoder:nt});function it(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const ot=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ct extends f{constructor(t,e,n){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[it(t,"open",this.onopen.bind(this)),it(t,"packet",this.onpacket.bind(this)),it(t,"error",this.onerror.bind(this)),it(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(ot.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');e.unshift(t);const n={type:et.EVENT,data:e,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,s=e.pop();this._registerAckCallback(t,s),n.id=t}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,e){const n=this.flags.timeout;if(void 0===n)return void(this.acks[t]=e);const s=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),n);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(s),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this.packet({type:et.CONNECT,data:t})})):this.packet({type:et.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case et.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case et.EVENT:case et.BINARY_EVENT:this.onevent(t);break;case et.ACK:case et.BINARY_ACK:this.onack(t);break;case et.DISCONNECT:this.ondisconnect();break;case et.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let n=!1;return function(...s){n||(n=!0,e.packet({type:et.ACK,id:t,data:s}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:et.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function at(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}at.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},at.prototype.reset=function(){this.attempts=0},at.prototype.setMin=function(t){this.ms=t},at.prototype.setMax=function(t){this.max=t},at.prototype.setJitter=function(t){this.jitter=t};class ut extends f{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,b(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=e.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new at({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const s=e.parser||rt;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new z(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=it(e,"open",(function(){n.onopen(),t&&t()})),r=it(e,"error",(e=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",e),t?t(e):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;0===t&&s();const n=this.setTimeoutFn((()=>{s(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(s),this.subs.push(r),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(it(t,"ping",this.onping.bind(this)),it(t,"data",this.ondata.bind(this)),it(t,"error",this.onerror.bind(this)),it(t,"close",this.onclose.bind(this)),it(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error")}}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n||(n=new ct(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const lt={};function ht(t,e){"object"==typeof t&&(e=t,t=void 0);const n=function(t,e="",n){let s=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),s=q(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+e,s.href=s.protocol+"://"+r+(n&&n.port===s.port?"":":"+s.port),s}(t,(e=e||{}).path||"/socket.io"),s=n.source,r=n.id,i=n.path,o=lt[r]&&i in lt[r].nsps;let c;return e.forceNew||e["force new connection"]||!1===e.multiplex||o?c=new ut(s,e):(lt[r]||(lt[r]=new ut(s,e)),c=lt[r]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}function pt(){}function dt(t){return t()}function ft(){return Object.create(null)}function gt(t){t.forEach(dt)}function mt(t){return"function"==typeof t}function yt(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function vt(t,...e){if(null==t)return pt;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function bt(t){let e;return vt(t,(t=>e=t))(),e}function Ct(t,e,n){t.$$.on_destroy.push(vt(e,n))}function wt(t){return null==t?"":t}function $t(t,e){t.appendChild(e)}function kt(t,e,n){t.insertBefore(e,n||null)}function St(t){t.parentNode.removeChild(t)}function xt(t){return document.createElement(t)}function Et(t){return document.createTextNode(t)}function Rt(){return Et(" ")}function It(){return Et("")}function Ot(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function _t(t){return function(e){return e.preventDefault(),t.call(this,e)}}function At(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Nt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Tt(t,e){t.value=null==e?"":e}function Ft(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}t.selectedIndex=-1}function Lt(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function Mt(t,e,n){t.classList[n?"add":"remove"](e)}let Ut;function Bt(t){Ut=t}function Pt(t){(function(){if(!Ut)throw new Error("Function called outside component initialization");return Ut})().$$.on_destroy.push(t)}Object.assign(ht,{Manager:ut,Socket:ct,io:ht,connect:ht});const jt=[],Dt=[],Vt=[],qt=[],zt=Promise.resolve();let Ht=!1;function Gt(t){Vt.push(t)}function Wt(t){qt.push(t)}const Yt=new Set;let Jt=0;function Kt(){const t=Ut;do{for(;Jt<jt.length;){const t=jt[Jt];Jt++,Bt(t),Xt(t.$$)}for(Bt(null),jt.length=0,Jt=0;Dt.length;)Dt.pop()();for(let t=0;t<Vt.length;t+=1){const e=Vt[t];Yt.has(e)||(Yt.add(e),e())}Vt.length=0}while(jt.length);for(;qt.length;)qt.pop()();Ht=!1,Yt.clear(),Bt(t)}function Xt(t){if(null!==t.fragment){t.update(),gt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Gt)}}const Zt=new Set;let Qt;function te(){Qt={r:0,c:[],p:Qt}}function ee(){Qt.r||gt(Qt.c),Qt=Qt.p}function ne(t,e){t&&t.i&&(Zt.delete(t),t.i(e))}function se(t,e,n,s){if(t&&t.o){if(Zt.has(t))return;Zt.add(t),Qt.c.push((()=>{Zt.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}else s&&s()}function re(t,e){t.d(1),e.delete(t.key)}function ie(t,e,n,s,r,i,o,c,a,u,l,h){let p=t.length,d=i.length,f=p;const g={};for(;f--;)g[t[f].key]=f;const m=[],y=new Map,v=new Map;for(f=d;f--;){const t=h(r,i,f),c=n(t);let a=o.get(c);a?s&&a.p(t,e):(a=u(c,t),a.c()),y.set(c,m[f]=a),c in g&&v.set(c,Math.abs(f-g[c]))}const b=new Set,C=new Set;function w(t){ne(t,1),t.m(c,l),o.set(t.key,t),l=t.first,d--}for(;p&&d;){const e=m[d-1],n=t[p-1],s=e.key,r=n.key;e===n?(l=e.first,p--,d--):y.has(r)?!o.has(s)||b.has(s)?w(e):C.has(r)?p--:v.get(s)>v.get(r)?(C.add(s),w(e)):(b.add(r),p--):(a(n,o),p--)}for(;p--;){const e=t[p];y.has(e.key)||a(e,o)}for(;d;)w(m[d-1]);return m}function oe(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function ce(t){t&&t.c()}function ae(t,e,n,s){const{fragment:r,on_mount:i,on_destroy:o,after_update:c}=t.$$;r&&r.m(e,n),s||Gt((()=>{const e=i.map(dt).filter(mt);o?o.push(...e):gt(e),t.$$.on_mount=[]})),c.forEach(Gt)}function ue(t,e){const n=t.$$;null!==n.fragment&&(gt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function le(t,e){-1===t.$$.dirty[0]&&(jt.push(t),Ht||(Ht=!0,zt.then(Kt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function he(t,e,n,s,r,i,o,c=[-1]){const a=Ut;Bt(t);const u=t.$$={fragment:null,ctx:null,props:i,update:pt,not_equal:r,bound:ft(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ft(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};o&&o(u.root);let l=!1;if(u.ctx=n?n(t,e.props||{},((e,n,...s)=>{const i=s.length?s[0]:n;return u.ctx&&r(u.ctx[e],u.ctx[e]=i)&&(!u.skip_bound&&u.bound[e]&&u.bound[e](i),l&&le(t,e)),n})):[],u.update(),l=!0,gt(u.before_update),u.fragment=!!s&&s(u.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);u.fragment&&u.fragment.l(t),t.forEach(St)}else u.fragment&&u.fragment.c();e.intro&&ne(t.$$.fragment),ae(t,e.target,e.anchor,e.customElement),Kt()}Bt(a)}class pe{$destroy(){ue(this,1),this.$destroy=pt}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const de=[];function fe(t,e=pt){let n;const s=new Set;function r(e){if(yt(t,e)&&(t=e,n)){const e=!de.length;for(const e of s)e[1](),de.push(e,t);if(e){for(let t=0;t<de.length;t+=2)de[t][0](de[t+1]);de.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(i,o=pt){const c=[i,o];return s.add(c),1===s.size&&(n=e(r)||pt),i(t),()=>{s.delete(c),0===s.size&&(n(),n=null)}}}}let ge=null;const me=function(){const{subscribe:t,set:e,update:n}=fe("");return{subscribe:t,display:t=>{clearTimeout(ge),e(t),ge=setTimeout((()=>e("")),5e3)}}}(),ye="deviceId";function ve(){let t=localStorage.getItem(ye);return t||(t=crypto.randomUUID(),localStorage.setItem(ye,t)),t}const be="undefined"!=typeof window&&void 0!==window.document;"undefined"!=typeof process&&null!=process.versions&&process.versions.node;var Ce=1e3,we=60*Ce,$e=60*we,ke=24*$e,Se=7*ke,xe=365.25*ke,Ee=function(t,e){e=e||{};var n=typeof t;if("string"===n&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*xe;case"weeks":case"week":case"w":return n*Se;case"days":case"day":case"d":return n*ke;case"hours":case"hour":case"hrs":case"hr":case"h":return n*$e;case"minutes":case"minute":case"mins":case"min":case"m":return n*we;case"seconds":case"second":case"secs":case"sec":case"s":return n*Ce;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(t);if("number"===n&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=ke)return Re(t,e,ke,"day");if(e>=$e)return Re(t,e,$e,"hour");if(e>=we)return Re(t,e,we,"minute");if(e>=Ce)return Re(t,e,Ce,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=ke)return Math.round(t/ke)+"d";if(e>=$e)return Math.round(t/$e)+"h";if(e>=we)return Math.round(t/we)+"m";if(e>=Ce)return Math.round(t/Ce)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Re(t,e,n,s){var r=e>=1.5*n;return Math.round(t/n)+" "+s+(r?"s":"")}var Ie,Oe,_e=function(t){function e(t){let s,r,i,o=null;function c(...t){if(!c.enabled)return;const n=c,r=Number(new Date),i=r-(s||r);n.diff=i,n.prev=s,n.curr=r,s=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((s,r)=>{if("%%"===s)return"%";o++;const i=e.formatters[r];if("function"==typeof i){const e=t[o];s=i.call(n,e),t.splice(o,1),o--}return s})),e.formatArgs.call(n,t);(n.log||e.log).apply(n,t)}return c.namespace=t,c.useColors=e.useColors(),c.color=e.selectColor(t),c.extend=n,c.destroy=e.destroy,Object.defineProperty(c,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==e.namespaces&&(r=e.namespaces,i=e.enabled(t)),i),set:t=>{o=t}}),"function"==typeof e.init&&e.init(c),c}function n(t,n){const s=e(this.namespace+(void 0===n?":":n)+t);return s.log=this.log,s}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(s),...e.skips.map(s).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const s=("string"==typeof t?t:"").split(/[\s,]+/),r=s.length;for(n=0;n<r;n++)s[n]&&("-"===(t=s[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,s;for(n=0,s=e.skips.length;n<s;n++)if(e.skips[n].test(t))return!1;for(n=0,s=e.names.length;n<s;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=Ee,e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e},Ae=(Ie=function(t,e){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let s=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(s++,"%c"===t&&(r=s))})),e.splice(r,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=_e(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},Ie(Oe={exports:{}},Oe.exports),Oe.exports);const Ne={},Te=Fe("vit:core:logger");function Fe(t){if(Ne[t])return Te(`re-using log with namespace: '${t}'`),Ne[t];const e=Ne[t]=Ae(t),n=t.indexOf(":"),s=-1===n?`v-${t}`:t.substring(0,n)+"-v"+t.substring(n),r=Ae(s);e.verbose=e.v=r;const i=Ae(t);i.enabled=!0;return e.force=e.f=(t,...e)=>i(`IMPORTANT: ${t}`,...e),e}let Le=be?localStorage.getItem("debug")||"":process.env.DEBUG||"";function Me(t,e,n){if(!Error.prototype.defineUserMsg)throw new Error("*** ERROR *** socketAckFn() requires the activation of ErrorExtensionPolyfill.js");return({value:s,errMsg:r,userMsg:i}={})=>{!function(t,e,n,s,r,i){if(r){const t=new Error(s||"Expected User Defined Condition").defineUserMsg(r);i&&t.defineAttemptingToMsg(i),e(t)}else if(s){const t=new Error(s);i&&t.defineAttemptingToMsg(i),e(t)}else t(n)}(t,e,s,r,i,n)}}Te.f(`our currentLogFilters: '${Le}'`),Fe.isLogFilterEnabled=function(t){return Ae.enabled(t)},Fe.setLogFilters=function(t){Le=t,Ae.enable(t)},Fe.clearLogFilters=function(){return Le=Ae.disable()},Fe.currentLogFilters=function(){return Le},Fe("vit:core:socketIOUtils");const Ue=Fe("vit:client:user"),Be={email:"",name:"",enablement:{admin:!1},guestName:"",inSignInVerificationPhase:"",isSignedIn(){return!!this.email},isGuest(){return!this.isSignedIn()},isRegistered(){return this.isSignedIn()||!!this.guestName},getUserName(){return this.isSignedIn()?this.name:this.guestName?`${this.guestName} (Guest)`:"Guest"}};const Pe=function(){const{subscribe:t,set:e,update:n}=fe(Be);return{subscribe:t,registerGuest:async t=>{Ue(`registerGuest with guestName: ${t}`);const{userState:e,token:s}=await function(t){return new Promise(((e,n)=>{je.emit("register-guest",t,Me(e,n))}))}(t);Ue(`successful guest registration with guestName: ${e.guestName} ... userState: `,e),n((t=>({...t,...e}))),localStorage.setItem("token",s),me.display(`Welcome ${bt(Pe).getUserName()} :-)`)},signIn:async t=>{Ue(`signIn user with email: ${t}`),await function(t){return new Promise(((e,n)=>{je.emit("sign-in",t,Me(e,n))}))}(t),n((e=>({...e,inSignInVerificationPhase:t}))),me.display(`A sign-in verification code has been sent to your email: ${t}`)},signInVerification:async t=>{Ue("signInVerification of user's email");const{userState:e,token:s}=await function(t){return new Promise(((e,n)=>{je.emit("sign-in-verification",t,Me(e,n))}))}(t);Ue(`successful signInVerification user with email: ${e.email} ... userState: `,e),n((t=>({...t,...e,inSignInVerificationPhase:""}))),localStorage.setItem("token",s),me.display(`Welcome ${bt(Pe).getUserName()} :-)`)},signInVerificationResendCode:async()=>{Ue("resend code for signInVerification of user's email"),await new Promise(((t,e)=>{je.emit("sign-in-verification-resend-code",Me(t,e))})),Ue("successful resend of signInVerification code"),me.display(`A sign-in verification code has been RE-SENT to your email: ${bt(Pe).inSignInVerificationPhase}`)},signInVerificationCancel:()=>{n((t=>({...t,inSignInVerificationPhase:""})))},signOut:async()=>{Ue("signOut user");const{userState:t,token:e}=await new Promise(((t,e)=>{je.emit("sign-out",Me(t,e))}));Ue("successful signOut user ... userState: ",t),n((e=>({...e,...t}))),localStorage.setItem("token",e),me.display(`You have now been signed out - you are now a guest ... ${bt(Pe).getUserName()}.`)},userAuthChanged:t=>{n((e=>({...e,...t}))),me.display("Your user identity has been synced from another app instance in a separate browser window.")},preAuthComplete:(t,e)=>{n((e=>({...e,...t}))),me.display(e)}}}();let je;const De=function(t={}){const e=window.AudioContext||window.webkitAudioContext,n=t.context||new e,s=t.frequency||1e3,r=t.interval||250;function i(t=1){!function e(i){!function(){const t=n.currentTime,e=n.createOscillator(),r=n.createGain();r.gain.value=.2,e.connect(r),r.connect(n.destination),r.gain.setValueAtTime(r.gain.value,t),r.gain.exponentialRampToValueAtTime(1e-5,t+1),e.onended=function(){r.disconnect(n.destination),e.disconnect(r)},e.type="sine",e.frequency.value=s,e.start(t),e.stop(t+1)}(),++i<t&&setTimeout(e,r,i)}(0)}return i.destroy=function(){t.context||n.close()},i}(),Ve=Fe("vit:client:chat"),qe={session:{},sessions:[],isActive:!1};function ze(t){const e=Object.values(t).sort(((t,e)=>t.otherUserName.localeCompare(e.otherUserName)));return{session:t,sessions:e,isActive:e.length>0}}const He=function(){const{subscribe:t,update:e}=fe(qe);return{subscribe:t,solicitPrivateMsg:()=>{Ve("solicit a private message to server ... emitting socket private-msg-solicit"),Ge.emit("private-msg-solicit"),me.display("Requesting chat :-)")},connect:(t,n,s)=>{Ve(`connecting chat with: ${n=n||"Unknown"}, msg: "${s=s||`Hello from ${n}`}"`),e((e=>ze({...e.session,[t]:{...e.session[t],otherSocketId:t,otherUserName:n,msgs:[...e.session[t]?.msgs||[],{when:new Date,who:!0,msg:s}]}}))),me.display(`Chat now available with ${n} (see Chat tab)`)},sendMsg:(t,n)=>{const s=bt(He).session[n];Ve(`sending msg: "${t}" TO: ${s.otherUserName}`),Ge.emit("private-msg",s.otherSocketId,Ge.id,t),e((e=>ze({...e.session,[n]:{...e.session[n],msgs:[...e.session[n]?.msgs||[],{when:new Date,who:!1,msg:t}]}})))},receiveMsg:(t,n)=>{const s=bt(He).session[n];Ve(`receiving msg: "${t}" FROM: ${s.otherUserName}`),e((e=>ze({...e.session,[n]:{...e.session[n],msgs:[...e.session[n]?.msgs||[],{when:new Date,who:!0,msg:t}]}}))),De()},disconnect:t=>{const n=bt(He).session[t];Ve(`disconnect our chat session with ${n.otherUserName}`),e((e=>{const{[t]:n,...s}=e.session;return ze(s)})),Ge.emit("private-msg-disconnect",t,Ge.id)},disconnected:t=>{Ve("our chat session has been disconnected (from the other party)");const n=bt(He).session[t];n&&(Ve(`chat session with ${n.otherUserName} has been disconnected (by them)`),e((e=>{const{[t]:n,...s}=e.session;return ze(s)})))}}}();let Ge;const We=Fe("vit:client:systemIO");let Ye;const Je=Fe("vit:client:system");function Ke(t,e,n,s,r=!1){const{subscribe:i,update:o}=fe({sysId:t,isHost:s,participants:[],isRunning:r,model:n}),c={subscribe:i,runChanged:t=>{o((e=>({...e,isRunning:t})))},participantsChanged:t=>{o((e=>({...e,participants:t})))},stateChanged:t=>{o((e=>{const n=structuredClone(e.model);return Object.entries(t).forEach((([t,e])=>{const[s,r]=t.split(".");n[s][r]=e})),{...e,model:n}}))},localStateChange:{},cacheLocalStateChange(t,e){this.localStateChange[t]=e},extractLocalStateChange(){const t=this.localStateChange;return this.localStateChange={},t},foo:()=>{}};return en.set(t,c),c}async function Xe(t,e,n){return Fe("vit:client:system:launchSystem"),await function(t,e,n){return new Promise(((s,r)=>{Ye.emit("launch-system",t,e,n,Me(s,r))}))}(t,e,n),Ke(t,0,n,!0)}async function Ze(t,e){const n=Fe("vit:client:system:joinSystem");if(sn(t))throw n(`local client cache found system '${t}' ... erroring out`),new Error('*** USER ERROR *** in "joinSystem()" function').defineUserMsg(`system '${t}' already exists (in client cache)`);const{isRunning:s,model:r}=await function(t,e){return new Promise(((n,s)=>{Ye.emit("join-system",t,e,Me(n,s))}))}(t,e);return Ke(t,0,r,!1,s)}async function Qe(t){await function(t){return new Promise(((e,n)=>{Ye.emit("run-system",t,Me(e,n))}))}(t)}async function tn(t){await function(t){return new Promise(((e,n)=>{Ye.emit("pause-system",t,Me(e,n))}))}(t)}Je("creating client-side systems cache");const en=new Map;function nn(){return Array.from(en.keys())}function sn(t){return en.get(t)}let rn;const on=Fe("vit:core:logger:filterLogsIOClient");let cn;function an(t){on("here we are in registerLogFilterSocketHandlers"),cn=t,cn.on("get-other-log-filters",(t=>{t(Fe.currentLogFilters())})),cn.on("set-other-log-filters",((t,e)=>{Fe.setLogFilters(e),on.f(`our logging filter has been REMOTELY set set to: '${e}'`)}))}const un="localhost"===window?.location?.hostname,ln=Fe("vit:client:sockets");function hn(t){let e,n,s;return{c(){e=xt("b"),e.textContent="WITHOUT",n=Et(" the ability to publish your package "),s=xt("i"),s.textContent="(you must sign-in for that)"},m(t,r){kt(t,e,r),kt(t,n,r),kt(t,s,r)},d(t){t&&St(e),t&&St(n),t&&St(s)}}}function pn(t){let e,n,s;return{c(){e=xt("b"),e.textContent="WITH",n=Et(" the ability to publish your package "),s=xt("i"),s.textContent="(because you have signed-in)"},m(t,r){kt(t,e,r),kt(t,n,r),kt(t,s,r)},d(t){t&&St(e),t&&St(n),t&&St(s)}}}function dn(t){let e,n,s,r,i,o,c,a,u;function l(t,e){return 1&e&&(u=null),null==u&&(u=!!t[0].isSignedIn()),u?pn:hn}let h=l(t,-1),p=h(t);return{c(){e=xt("div"),n=xt("center"),s=xt("h4"),s.textContent="IDE",r=Rt(),i=xt("p"),o=Et("Do normal editing of packages here.\r\n      "),c=xt("br"),a=Rt(),p.c()},m(t,u){kt(t,e,u),$t(e,n),$t(n,s),$t(n,r),$t(n,i),$t(i,o),$t(i,c),$t(i,a),p.m(i,null)},p(t,[e]){h!==(h=l(t,e))&&(p.d(1),p=h(t),p&&(p.c(),p.m(i,null)))},i:pt,o:pt,d(t){t&&St(e),p.d()}}}function fn(t,e,n){let s;return Ct(t,Pe,(t=>n(0,s=t))),[s]}class gn extends pe{constructor(t){super(),he(this,t,fn,dn,yt,{})}}function mn(t,e,n){const s=t.slice();return s[8]=e[n][0],s[9]=e[n][1],s[10]=e,s[11]=n,s}function yn(t){let e,n,s,r,i,o,c,a,u,l,h,p,d,f,g,m,y,v,b,C,w,$,k,S,x,E,R,I=t[2].sysId+"",O=t[2].isHost?"host":"participant",_=t[2].participants+"",A=t[2].isRunning?"running":"paused";function N(t,e){return t[2].isRunning?bn:vn}let T=N(t),F=T(t),L=Object.entries(t[2].model),M=[];for(let e=0;e<L.length;e+=1)M[e]=$n(mn(t,L,e));return{c(){e=xt("b"),e.textContent="System:",n=Rt(),s=Et(I),r=Rt(),i=xt("i"),o=Et("("),c=Et(O),a=Et(")"),u=Rt(),l=xt("br"),h=Rt(),p=xt("b"),p.textContent="Participants:",d=Rt(),f=Et(_),g=Rt(),m=xt("br"),y=Rt(),v=xt("b"),v.textContent="Status:",b=Rt(),C=Et(A),w=Rt(),F.c(),$=Rt(),k=xt("br"),S=Rt(),x=xt("b"),x.textContent="Model:",E=Rt(),R=xt("ul");for(let t=0;t<M.length;t+=1)M[t].c()},m(t,I){kt(t,e,I),kt(t,n,I),kt(t,s,I),kt(t,r,I),kt(t,i,I),$t(i,o),$t(i,c),$t(i,a),kt(t,u,I),kt(t,l,I),kt(t,h,I),kt(t,p,I),kt(t,d,I),kt(t,f,I),kt(t,g,I),kt(t,m,I),kt(t,y,I),kt(t,v,I),kt(t,b,I),kt(t,C,I),kt(t,w,I),F.m(t,I),kt(t,$,I),kt(t,k,I),kt(t,S,I),kt(t,x,I),kt(t,E,I),kt(t,R,I);for(let t=0;t<M.length;t+=1)M[t].m(R,null)},p(t,e){if(4&e&&I!==(I=t[2].sysId+"")&&Nt(s,I),4&e&&O!==(O=t[2].isHost?"host":"participant")&&Nt(c,O),4&e&&_!==(_=t[2].participants+"")&&Nt(f,_),4&e&&A!==(A=t[2].isRunning?"running":"paused")&&Nt(C,A),T===(T=N(t))&&F?F.p(t,e):(F.d(1),F=T(t),F&&(F.c(),F.m($.parentNode,$))),5&e){let n;for(L=Object.entries(t[2].model),n=0;n<L.length;n+=1){const s=mn(t,L,n);M[n]?M[n].p(s,e):(M[n]=$n(s),M[n].c(),M[n].m(R,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=L.length}},d(t){t&&St(e),t&&St(n),t&&St(s),t&&St(r),t&&St(i),t&&St(u),t&&St(l),t&&St(h),t&&St(p),t&&St(d),t&&St(f),t&&St(g),t&&St(m),t&&St(y),t&&St(v),t&&St(b),t&&St(C),t&&St(w),F.d(t),t&&St($),t&&St(k),t&&St(S),t&&St(x),t&&St(E),t&&St(R),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(M,t)}}}function vn(t){let e,n,s;return{c(){e=xt("button"),e.textContent="Run"},m(r,i){kt(r,e,i),n||(s=Ot(e,"click",t[3]),n=!0)},p:pt,d(t){t&&St(e),n=!1,s()}}}function bn(t){let e,n,s;return{c(){e=xt("button"),e.textContent="Pause"},m(r,i){kt(r,e,i),n||(s=Ot(e,"click",t[4]),n=!0)},p:pt,d(t){t&&St(e),n=!1,s()}}}function Cn(t){let e,n,s=JSON.stringify(t[9],null,2)+"";return{c(){e=xt("pre"),n=Et(s)},m(t,s){kt(t,e,s),$t(e,n)},p(t,e){4&e&&s!==(s=JSON.stringify(t[9],null,2)+"")&&Nt(n,s)},d(t){t&&St(e)}}}function wn(t){let e,n,s,r,i,o,c,a=t[9].pres+"";function u(){t[5].call(n,t[10],t[11])}function l(...e){return t[6](t[8],...e)}return{c(){e=Et("a valve ...\r\n    \r\n    "),n=xt("input"),s=Et("\r\n    open, with pressure "),r=xt("b"),i=Et(a),At(n,"type","checkbox")},m(a,h){kt(a,e,h),kt(a,n,h),n.checked=t[9].open,kt(a,s,h),kt(a,r,h),$t(r,i),o||(c=[Ot(n,"change",u),Ot(n,"change",l)],o=!0)},p(e,s){t=e,4&s&&(n.checked=t[9].open),4&s&&a!==(a=t[9].pres+"")&&Nt(i,a)},d(t){t&&St(e),t&&St(n),t&&St(s),t&&St(r),o=!1,gt(c)}}}function $n(t){let e,n,s,r,i,o,c=t[8]+"";function a(t,e){return"valve"===t[9].type?wn:Cn}let u=a(t),l=u(t);return{c(){e=xt("p"),n=xt("b"),s=Et(c),r=Et(":"),i=Rt(),l.c(),o=Rt()},m(t,c){kt(t,e,c),$t(e,n),$t(n,s),$t(n,r),$t(e,i),l.m(e,null),$t(e,o)},p(t,n){4&n&&c!==(c=t[8]+"")&&Nt(s,c),u===(u=a(t))&&l?l.p(t,n):(l.d(1),l=u(t),l&&(l.c(),l.m(e,o)))},d(t){t&&St(e),l.d()}}}function kn(t){let e,n,s,r=t[0]&&yn(t);return{c(){r&&r.c(),e=Rt(),n=xt("div"),s=Et(t[1]),At(n,"class","error svelte-1t6gmo2")},m(t,i){r&&r.m(t,i),kt(t,e,i),kt(t,n,i),$t(n,s)},p(t,[n]){t[0]?r?r.p(t,n):(r=yn(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),2&n&&Nt(s,t[1])},i:pt,o:pt,d(t){r&&r.d(t),t&&St(e),t&&St(n)}}}function Sn(t,e,n){let s,r,i=pt,o=()=>(i(),i=vt(a,(t=>n(2,r=t))),a);t.$$.on_destroy.push((()=>i()));const c=Fe("vit:client:SystemDisplay");let{system:a}=e;o();return t.$$set=t=>{"system"in t&&o(n(0,a=t.system))},t.$$.update=()=>{1&t.$$.dirty&&n(1,s=a?"":"No system to run.")},[a,s,r,async function(){const t=r.sysId;try{n(1,s=""),await Qe(t)}catch(t){t.isExpected()?n(1,s=t.userMsg):(n(1,s="Unexpected error in runSystem process ... see logs for detail"),c.v(`*** ERROR *** Unexpected error in runSystem process: ${t}`,t))}},async function(){const t=r.sysId;try{n(1,s=""),await tn(t)}catch(t){t.isExpected()?n(1,s=t.userMsg):(n(1,s="Unexpected error in pauseSystem process ... see logs for detail"),c.v(`*** ERROR *** Unexpected error in pauseSystem process: ${t}`,t))}},function(t,e){t[e][1].open=this.checked},(t,e)=>a.cacheLocalStateChange(`${t}.open`,e.target.checked)]}class xn extends pe{constructor(t){super(),he(this,t,Sn,kn,yt,{system:0})}}function En(t,e,n){const s=t.slice();return s[4]=e[n],s}function Rn(t,e){let n,s,r=e[4]+"";return{key:t,first:null,c(){n=xt("option"),s=Et(r),n.__value=e[4],n.value=n.__value,this.first=n},m(t,e){kt(t,n,e),$t(n,s)},p(t,n){e=t},d(t){t&&St(n)}}}function In(t){let e,n=en.size>0,s=n&&function(t){let e,n,s,r=[],i=new Map,o=nn();const c=t=>t[4];for(let e=0;e<o.length;e+=1){let n=En(t,o,e),s=c(n);i.set(s,r[e]=Rn(s,n))}return{c(){e=xt("select");for(let t=0;t<r.length;t+=1)r[t].c();void 0===t[0]&&Gt((()=>t[3].call(e)))},m(i,o){kt(i,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);Ft(e,t[0]),n||(s=Ot(e,"change",t[3]),n=!0)},p(t,n){0&n&&(o=nn(),r=ie(r,n,c,1,t,o,i,e,re,Rn,null,En)),1&n&&Ft(e,t[0])},d(t){t&&St(e);for(let t=0;t<r.length;t+=1)r[t].d();n=!1,s()}}}(t);return{c(){s&&s.c(),e=It()},m(t,n){s&&s.m(t,n),kt(t,e,n)},p(t,[e]){n&&s.p(t,e)},i:pt,o:pt,d(t){s&&s.d(t),t&&St(e)}}}function On(){let t;return{get:()=>t,set(e){t=e}}}const _n=On();function An(t,e,n){let{system:s}=e,{stateRetention:r=_n}=e,i=r.get();return Pt((()=>{r.set(i)})),t.$$set=t=>{"system"in t&&n(1,s=t.system),"stateRetention"in t&&n(2,r=t.stateRetention)},t.$$.update=()=>{1&t.$$.dirty&&n(1,s=sn(i)||null)},[i,s,r,function(){i=Lt(this),n(0,i)}]}class Nn extends pe{constructor(t){super(),he(this,t,An,In,yt,{system:1,stateRetention:2})}}function Tn(t){let e,n,s,r,i,o,c,a,u,l,h,p,d,f,g,m,y,v,b,C;return{c(){e=xt("div"),n=xt("h4"),n.textContent="Join an EXISTING System",s=Rt(),r=xt("form"),i=xt("label"),o=Et("System ID:   "),c=xt("input"),a=Rt(),u=xt("label"),l=Et("Access Code: "),h=xt("input"),p=Rt(),d=xt("div"),f=Et(t[3]),g=Rt(),m=xt("button"),m.textContent="Join",y=Rt(),v=xt("button"),v.textContent="Cancel",At(c,"type","text"),At(c,"autocomplete","on"),c.autofocus=!0,At(h,"type","text"),At(h,"autocomplete","on"),At(d,"class","error svelte-1t6gmo2"),At(r,"onsubmit","return false;")},m(w,$){kt(w,e,$),$t(e,n),$t(e,s),$t(e,r),$t(r,i),$t(i,o),$t(i,c),Tt(c,t[1]),$t(r,a),$t(r,u),$t(u,l),$t(u,h),Tt(h,t[2]),$t(r,p),$t(r,d),$t(d,f),$t(r,g),$t(r,m),$t(r,y),$t(r,v),c.focus(),b||(C=[Ot(c,"input",t[6]),Ot(h,"input",t[7]),Ot(m,"click",t[4]),Ot(v,"click",t[8])],b=!0)},p(t,[e]){2&e&&c.value!==t[1]&&Tt(c,t[1]),4&e&&h.value!==t[2]&&Tt(h,t[2]),8&e&&Nt(f,t[3])},i:pt,o:pt,d(t){t&&St(e),b=!1,gt(C)}}}function Fn(t,e,n){const s=Fe("vit:client:SystemJoin");let{newSystemIntroduced:r}=e,{resetSubCompDisp:i}=e,o="",c="",a="";return t.$$set=t=>{"newSystemIntroduced"in t&&n(5,r=t.newSystemIntroduced),"resetSubCompDisp"in t&&n(0,i=t.resetSubCompDisp)},[i,o,c,a,async function(){try{await Ze(o,c);me.display(`System '${o}' has been successfully joined!`),r(o),i()}catch(t){t.isExpected()?n(3,a=t.userMsg):(n(3,a="Unexpected error in joinSystem process ... see logs for detail"),s.v(`*** ERROR *** Unexpected error in joinSystem process: ${t}`,t))}},r,function(){o=this.value,n(1,o)},function(){c=this.value,n(2,c)},()=>i()]}class Ln extends pe{constructor(t){super(),he(this,t,Fn,Tn,yt,{newSystemIntroduced:5,resetSubCompDisp:0})}}function Mn(t){let e,n,s,r,i,o,c,a,u,l,h,p,d,f,g,m,y,v,b,C,w,$,k,S;return{c(){e=xt("div"),n=xt("h4"),n.textContent="Launch a NEW System",s=Rt(),r=xt("form"),i=xt("label"),o=Et("System ID:   "),c=xt("input"),a=Rt(),u=xt("label"),l=Et("Access Code: "),h=xt("input"),p=Rt(),d=xt("label"),f=Et("Model:       "),g=xt("textarea"),m=Rt(),y=xt("div"),v=Et(t[4]),b=Rt(),C=xt("button"),C.textContent="Launch",w=Rt(),$=xt("button"),$.textContent="Cancel",At(c,"type","text"),At(c,"autocomplete","on"),c.autofocus=!0,At(i,"class","svelte-e84wh9"),At(h,"type","text"),At(h,"autocomplete","on"),At(u,"class","svelte-e84wh9"),At(g,"class","svelte-e84wh9"),At(y,"class","error svelte-e84wh9"),At(d,"class","svelte-e84wh9"),At(r,"onsubmit","return false;")},m(x,E){kt(x,e,E),$t(e,n),$t(e,s),$t(e,r),$t(r,i),$t(i,o),$t(i,c),Tt(c,t[1]),$t(r,a),$t(r,u),$t(u,l),$t(u,h),Tt(h,t[2]),$t(r,p),$t(r,d),$t(d,f),$t(d,g),Tt(g,t[3]),$t(d,m),$t(d,y),$t(y,v),$t(d,b),$t(d,C),$t(d,w),$t(d,$),c.focus(),k||(S=[Ot(c,"input",t[7]),Ot(h,"input",t[8]),Ot(g,"input",t[9]),Ot(C,"click",t[5]),Ot($,"click",t[10])],k=!0)},p(t,[e]){2&e&&c.value!==t[1]&&Tt(c,t[1]),4&e&&h.value!==t[2]&&Tt(h,t[2]),8&e&&Tt(g,t[3]),16&e&&Nt(v,t[4])},i:pt,o:pt,d(t){t&&St(e),k=!1,gt(S)}}}function Un(t,e,n){const s=Fe("vit:client:SystemLaunch");let{newSystemIntroduced:r}=e,{resetSubCompDisp:i}=e,o="",c="",a='{\n   "K1": {\n     "type": "valve",\n     "open": false,\n     "pres": 120\n   },\n   "R1": {\n     "type": "valve",\n     "open": true,\n     "pres": 1200\n   }\n }',u="";return t.$$set=t=>{"newSystemIntroduced"in t&&n(6,r=t.newSystemIntroduced),"resetSubCompDisp"in t&&n(0,i=t.resetSubCompDisp)},[i,o,c,a,u,async function(){let t={};try{t=JSON.parse(a)}catch(t){return void n(4,u=`Model contains invalid JSON ... ${t.message}`)}try{await Xe(o,c,t);me.display(`System '${o}' has successfully launched ... users may now join!`),r(o),i()}catch(t){t.isExpected()?n(4,u=t.userMsg):(n(4,u="Unexpected error in launchSystem process ... see logs for detail"),s.v(`*** ERROR *** Unexpected error in launchSystem process: ${t}`,t))}},r,function(){o=this.value,n(1,o)},function(){c=this.value,n(2,c)},function(){a=this.value,n(3,a)},()=>i()]}class Bn extends pe{constructor(t){super(),he(this,t,Un,Mn,yt,{newSystemIntroduced:6,resetSubCompDisp:0})}}function Pn(t){let e,n,s,r,i,o,c,a,u,l,h,p,d,f,g,m;function y(e){t[2](e)}let v={stateRetention:Vn};return void 0!==t[0]&&(v.system=t[0]),o=new Nn({props:v}),Dt.push((()=>oe(o,"system",y))),d=new xn({props:{system:t[0]}}),{c(){e=xt("div"),n=xt("center"),s=xt("h4"),s.textContent="System",r=Rt(),i=xt("p"),ce(o.$$.fragment),a=Et("\r\n\r\n      \r\n          \r\n      "),u=xt("button"),u.textContent="Launch New System",l=Rt(),h=xt("button"),h.textContent="Join Existing System",p=Rt(),ce(d.$$.fragment)},m(c,y){kt(c,e,y),$t(e,n),$t(n,s),$t(n,r),$t(n,i),ae(o,i,null),$t(i,a),$t(i,u),$t(i,l),$t(i,h),$t(e,p),ae(d,e,null),f=!0,g||(m=[Ot(u,"click",t[3]),Ot(h,"click",t[4])],g=!0)},p(t,e){const n={};!c&&1&e&&(c=!0,n.system=t[0],Wt((()=>c=!1))),o.$set(n);const s={};1&e&&(s.system=t[0]),d.$set(s)},i(t){f||(ne(o.$$.fragment,t),ne(d.$$.fragment,t),f=!0)},o(t){se(o.$$.fragment,t),se(d.$$.fragment,t),f=!1},d(t){t&&St(e),ue(o),ue(d),g=!1,gt(m)}}}function jn(t){let e,n,s;var r=t[1];function i(t){return{props:{newSystemIntroduced:qn,resetSubCompDisp:Hn}}}return r&&(e=new r(i())),{c(){e&&ce(e.$$.fragment),n=It()},m(t,r){e&&ae(e,t,r),kt(t,n,r),s=!0},p(t,s){if(r!==(r=t[1])){if(e){te();const t=e;se(t.$$.fragment,1,0,(()=>{ue(t,1)})),ee()}r?(e=new r(i()),ce(e.$$.fragment),ne(e.$$.fragment,1),ae(e,n.parentNode,n)):e=null}},i(t){s||(e&&ne(e.$$.fragment,t),s=!0)},o(t){e&&se(e.$$.fragment,t),s=!1},d(t){t&&St(n),e&&ue(e,t)}}}function Dn(t){let e,n,s,r;const i=[jn,Pn],o=[];function c(t,e){return t[1]?0:1}return e=c(t),n=o[e]=i[e](t),{c(){n.c(),s=It()},m(t,n){o[e].m(t,n),kt(t,s,n),r=!0},p(t,[r]){let a=e;e=c(t),e===a?o[e].p(t,r):(te(),se(o[a],1,1,(()=>{o[a]=null})),ee(),n=o[e],n?n.p(t,r):(n=o[e]=i[e](t),n.c()),ne(n,1),n.m(s.parentNode,s))},i(t){r||(ne(n),r=!0)},o(t){se(n),r=!1},d(t){o[e].d(t),t&&St(s)}}}Fe("vit:client:System");const Vn=On(),qn=t=>Vn.set(t),zn=fe(null),Hn=(t=null)=>zn.set(t);function Gn(t,e,n){let s;Ct(t,zn,(t=>n(1,s=t)));let r=null;return[r,s,function(t){r=t,n(0,r)},()=>Hn(Bn),()=>Hn(Ln)]}class Wn extends pe{constructor(t){super(),he(this,t,Gn,Dn,yt,{})}}function Yn(t,e,n){const s=t.slice();return s[6]=e[n],s}function Jn(t,e){let n,s,r,i=e[6].otherUserName+"";return{key:t,first:null,c(){n=xt("option"),s=Et(i),n.__value=r=e[6].otherSocketId,n.value=n.__value,this.first=n},m(t,e){kt(t,n,e),$t(n,s)},p(t,o){e=t,4&o&&i!==(i=e[6].otherUserName+"")&&Nt(s,i),4&o&&r!==(r=e[6].otherSocketId)&&(n.__value=r,n.value=n.__value)},d(t){t&&St(n)}}}function Kn(t){let e,n,s,r=[],i=new Map,o=t[2].sessions;const c=t=>t[6].otherSocketId;for(let e=0;e<o.length;e+=1){let n=Yn(t,o,e),s=c(n);i.set(s,r[e]=Jn(s,n))}return{c(){e=xt("select");for(let t=0;t<r.length;t+=1)r[t].c();void 0===t[1]&&Gt((()=>t[5].call(e)))},m(i,o){kt(i,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);Ft(e,t[1]),n||(s=Ot(e,"change",t[5]),n=!0)},p(t,[n]){4&n&&(o=t[2].sessions,r=ie(r,n,c,1,t,o,i,e,re,Jn,null,Yn)),6&n&&Ft(e,t[1])},i:pt,o:pt,d(t){t&&St(e);for(let t=0;t<r.length;t+=1)r[t].d();n=!1,s()}}}function Xn(){let t;return{get:()=>t,set(e){t=e}}}const Zn=Xn();function Qn(t,e,n){let s,r=pt,i=()=>(r(),r=vt(o,(t=>n(2,s=t))),o);t.$$.on_destroy.push((()=>r()));let{chat:o}=e;i();let{session:c}=e,{stateRetention:a=Zn}=e;Pt((()=>{a.set(u)}));let u=a.get();return t.$$set=t=>{"chat"in t&&i(n(0,o=t.chat)),"session"in t&&n(3,c=t.session),"stateRetention"in t&&n(4,a=t.stateRetention)},t.$$.update=()=>{6&t.$$.dirty&&(n(1,u=s.session[u]?u:s.sessions[0]?.otherSocketId),n(3,c=s.session[u]))},[o,u,s,c,a,function(){u=Lt(this),n(1,u),n(2,s)}]}class ts extends pe{constructor(t){super(),he(this,t,Qn,Kn,yt,{chat:0,session:3,stateRetention:4})}}function es(t,e,n){const s=t.slice();return s[7]=e[n],s}function ns(t,e){let n,s,r,i=e[7].msg+"";return{key:t,first:null,c(){n=xt("span"),s=Et(i),At(n,"class",r=wt(e[7].who?"other":"me")+" svelte-14rj4bs"),this.first=n},m(t,e){kt(t,n,e),$t(n,s)},p(t,o){e=t,1&o&&i!==(i=e[7].msg+"")&&Nt(s,i),1&o&&r!==(r=wt(e[7].who?"other":"me")+" svelte-14rj4bs")&&At(n,"class",r)},d(t){t&&St(n)}}}function ss(t){let e,n,s,r,i,o,c,a,u,l,h,p,d,f,g,m,y,v,b,C,w,$,k,S,x,E,R,I,O,_=t[0]?.otherUserName+"",A=t[2].getUserName()+"",N=[],T=new Map;function F(e){t[5](e)}let L={chat:He};void 0!==t[0]&&(L.session=t[0]),i=new ts({props:L}),Dt.push((()=>oe(i,"session",F)));let M=t[0]?.msgs||[];const U=t=>t[7].when;for(let e=0;e<M.length;e+=1){let n=es(t,M,e),s=U(n);T.set(s,N[e]=ns(s,n))}return{c(){e=xt("div"),n=xt("center"),s=xt("h4"),s.textContent="Chat",r=Rt(),ce(i.$$.fragment),c=Rt(),a=xt("div"),u=xt("span"),l=Et(_),h=Rt(),p=xt("span"),d=Et("Me ("),f=Et(A),g=Et(")"),m=Rt();for(let t=0;t<N.length;t+=1)N[t].c();y=Rt(),v=xt("div"),b=xt("form"),C=xt("label"),w=xt("input"),$=Et("\r\n          \r\n        "),k=xt("button"),k.textContent="Send",S=Rt(),x=xt("center"),E=xt("button"),E.textContent="Disconnect",At(u,"class","other svelte-14rj4bs"),At(p,"class","me svelte-14rj4bs"),At(a,"class","chatlist svelte-14rj4bs"),At(w,"type","text"),At(w,"size","50"),w.autofocus=!0,At(b,"id","chatform"),At(b,"onsubmit","return false;"),At(b,"class","svelte-14rj4bs"),At(v,"class","chatbox-area svelte-14rj4bs")},m(o,_){kt(o,e,_),$t(e,n),$t(n,s),$t(n,r),ae(i,n,null),$t(e,c),$t(e,a),$t(a,u),$t(u,l),$t(a,h),$t(a,p),$t(p,d),$t(p,f),$t(p,g),$t(a,m);for(let t=0;t<N.length;t+=1)N[t].m(a,null);$t(e,y),$t(e,v),$t(v,b),$t(b,C),$t(C,w),Tt(w,t[1]),$t(C,$),$t(C,k),$t(e,S),$t(e,x),$t(x,E),R=!0,w.focus(),I||(O=[Ot(w,"input",t[6]),Ot(k,"click",t[3]),Ot(E,"click",t[4])],I=!0)},p(t,[e]){const n={};!o&&1&e&&(o=!0,n.session=t[0],Wt((()=>o=!1))),i.$set(n),(!R||1&e)&&_!==(_=t[0]?.otherUserName+"")&&Nt(l,_),(!R||4&e)&&A!==(A=t[2].getUserName()+"")&&Nt(f,A),1&e&&(M=t[0]?.msgs||[],N=ie(N,e,U,1,t,M,T,a,re,ns,null,es)),2&e&&w.value!==t[1]&&Tt(w,t[1])},i(t){R||(ne(i.$$.fragment,t),R=!0)},o(t){se(i.$$.fragment,t),R=!1},d(t){t&&St(e),ue(i);for(let t=0;t<N.length;t+=1)N[t].d();I=!1,gt(O)}}}Fe("vit:client:Chat");let rs="";function is(t,e,n){let s,r;Ct(t,Pe,(t=>n(2,s=t))),Pt((()=>{rs=i}));let i=rs;return[r,i,s,function(){i&&(He.sendMsg(i,r.otherSocketId),n(1,i=""))},function(){He.disconnect(r.otherSocketId)},function(t){r=t,n(0,r)},function(){i=this.value,n(1,i)}]}class os extends pe{constructor(t){super(),he(this,t,is,ss,yt,{})}}function cs(t){let e,n,s,r,i,o,c,a;return{c(){e=xt("form"),n=xt("label"),s=Et("My Logs Filter:\r\n    "),r=xt("input"),i=Et("\r\n      \r\n    "),o=xt("button"),o.textContent="Change",At(r,"type","text"),r.autofocus=!0,At(e,"onsubmit","return false;")},m(u,l){kt(u,e,l),$t(e,n),$t(n,s),$t(n,r),Tt(r,t[0]),$t(n,i),$t(n,o),r.focus(),c||(a=[Ot(r,"input",t[2]),Ot(o,"click",t[1])],c=!0)},p(t,[e]){1&e&&r.value!==t[0]&&Tt(r,t[0])},i:pt,o:pt,d(t){t&&St(e),c=!1,gt(a)}}}function as(t,e,n){const s=Fe("vit:core:logger:FilterMyLogs");let r=Fe.currentLogFilters();return[r,function(){s(`before enabling this filter, our vit:core:logger:FilterMyLogs log enabled status is: log: ${s.enabled} ... logger: ${Fe.isLogFilterEnabled("vit:core:logger:FilterMyLogs")}`),Fe.setLogFilters(r),s.f(`client logging filter now set to: '${r}'`),s(`after enabling this filter, our vit:core:logger:FilterMyLogs log enabled status is: log: ${s.enabled} ... logger: ${Fe.isLogFilterEnabled("vit:core:logger:FilterMyLogs")}`)},function(){r=this.value,n(0,r)}]}class us extends pe{constructor(t){super(),he(this,t,as,cs,yt,{})}}function ls(t){let e;return{c(){e=xt("i"),e.textContent='For "Other" Client Logging Filter, establish a chat privite message to that client'},m(t,n){kt(t,e,n)},p:pt,i:pt,o:pt,d(t){t&&St(e)}}}function hs(t){let e,n,s,r,i,o,c,a,u,l,h,p;function d(e){t[8](e)}let f={chat:t[3],stateRetention:t[5]};return void 0!==t[0]&&(f.session=t[0]),r=new t[4]({props:f}),Dt.push((()=>oe(r,"session",d))),{c(){e=xt("form"),n=xt("label"),s=Et("Client Logging Filter for "),ce(r.$$.fragment),o=Et(":\r\n      "),c=xt("input"),a=Et("\r\n        \r\n      "),u=xt("button"),u.textContent="Change",At(c,"type","text"),At(e,"onsubmit","return false;")},m(i,d){kt(i,e,d),$t(e,n),$t(n,s),ae(r,n,null),$t(n,o),$t(n,c),Tt(c,t[1]),$t(n,a),$t(n,u),l=!0,h||(p=[Ot(c,"input",t[9]),Ot(u,"click",t[6])],h=!0)},p(t,e){const n={};!i&&1&e&&(i=!0,n.session=t[0],Wt((()=>i=!1))),r.$set(n),2&e&&c.value!==t[1]&&Tt(c,t[1])},i(t){l||(ne(r.$$.fragment,t),l=!0)},o(t){se(r.$$.fragment,t),l=!1},d(t){t&&St(e),ue(r),h=!1,gt(p)}}}function ps(t){let e,n,s,r;const i=[hs,ls],o=[];function c(t,e){return t[2].isActive?0:1}return e=c(t),n=o[e]=i[e](t),{c(){n.c(),s=It()},m(t,n){o[e].m(t,n),kt(t,s,n),r=!0},p(t,[r]){let a=e;e=c(t),e===a?o[e].p(t,r):(te(),se(o[a],1,1,(()=>{o[a]=null})),ee(),n=o[e],n?n.p(t,r):(n=o[e]=i[e](t),n.c()),ne(n,1),n.m(s.parentNode,s))},i(t){r||(ne(n),r=!0)},o(t){se(n),r=!1},d(t){o[e].d(t),t&&St(s)}}}function ds(t,e,n){let s;const r=Fe("vit:core:logger:FilterOtherLogs");let{otherClientSelector:i}=e;const{chat:o,ChatSessionSelector:c,stateRetention:a}=i;let u;Ct(t,o,(t=>n(2,s=t)));let l="";async function h(t){if(!t)return r(`delayedOtherInit(${t}): NO sessionId due to initialization timing (no-op till re-executed '')`),void n(1,l="");try{r(`delayedOtherInit('${t}') ... invoking async getOtherLogFilters()`),n(1,l=await(e=t,new Promise(((t,n)=>{cn.emit("get-other-log-filters",e,(e=>{e.startsWith("ERROR")?n(e):t(e)}))})))),r(`delayedOtherInit('${t}') RESULT: '${l}'`)}catch(t){alert(""+t)}var e}return t.$$set=t=>{"otherClientSelector"in t&&n(7,i=t.otherClientSelector)},t.$$.update=()=>{1&t.$$.dirty&&h(u?.otherSocketId)},[u,l,s,o,c,a,function(){var t,e;t=u.otherSocketId,e=l,cn.emit("set-other-log-filters",t,e),r.f(`other logging filter (for ${u.otherUserId}) is now set to: '${l}'`)},i,function(t){u=t,n(0,u)},function(){l=this.value,n(1,l)}]}class fs extends pe{constructor(t){super(),he(this,t,ds,ps,yt,{otherClientSelector:7})}}function gs(t){let e,n,s,r,i,o,c,a;return{c(){e=xt("form"),n=xt("label"),s=Et("Server Logging Filter:\r\n    "),r=xt("input"),i=Et("\r\n      \r\n    "),o=xt("button"),o.textContent="Change",At(r,"type","text"),At(e,"onsubmit","return false;")},m(u,l){kt(u,e,l),$t(e,n),$t(n,s),$t(n,r),Tt(r,t[0]),$t(n,i),$t(n,o),c||(a=[Ot(r,"input",t[2]),Ot(o,"click",t[1])],c=!0)},p(t,[e]){1&e&&r.value!==t[0]&&Tt(r,t[0])},i:pt,o:pt,d(t){t&&St(e),c=!1,gt(a)}}}function ms(t,e,n){const s=Fe("vit:core:logger:FilterServerLogs");let r="";return async function(){n(0,r=await new Promise(((t,e)=>{cn.emit("get-server-log-filters",(e=>{t(e)}))})))}(),[r,function(){var t;t=r,cn.emit("set-server-log-filters",t),s.f(`server logging filter now set to: '${r}'`)},function(){r=this.value,n(0,r)}]}class ys extends pe{constructor(t){super(),he(this,t,ms,gs,yt,{})}}function vs(t){let e,n,s,r,i,o;return e=new us({}),s=new fs({props:{otherClientSelector:t[0]}}),i=new ys({}),{c(){ce(e.$$.fragment),n=Rt(),ce(s.$$.fragment),r=Rt(),ce(i.$$.fragment)},m(t,c){ae(e,t,c),kt(t,n,c),ae(s,t,c),kt(t,r,c),ae(i,t,c),o=!0},p(t,[e]){const n={};1&e&&(n.otherClientSelector=t[0]),s.$set(n)},i(t){o||(ne(e.$$.fragment,t),ne(s.$$.fragment,t),ne(i.$$.fragment,t),o=!0)},o(t){se(e.$$.fragment,t),se(s.$$.fragment,t),se(i.$$.fragment,t),o=!1},d(t){ue(e,t),t&&St(n),ue(s,t),t&&St(r),ue(i,t)}}}function bs(t,e,n){let{otherClientSelector:s}=e;return t.$$set=t=>{"otherClientSelector"in t&&n(0,s=t.otherClientSelector)},[s]}class Cs extends pe{constructor(t){super(),he(this,t,bs,vs,yt,{otherClientSelector:0})}}function ws(t){let e,n,s,r,i;return r=new Cs({props:{otherClientSelector:{chat:He,ChatSessionSelector:ts,stateRetention:$s}}}),{c(){e=xt("div"),n=xt("center"),n.innerHTML="<h4>Admin</h4>",s=Rt(),ce(r.$$.fragment)},m(t,o){kt(t,e,o),$t(e,n),$t(e,s),ae(r,e,null),i=!0},p:pt,i(t){i||(ne(r.$$.fragment,t),i=!0)},o(t){se(r.$$.fragment,t),i=!1},d(t){t&&St(e),ue(r)}}}const $s=Xn();class ks extends pe{constructor(t){super(),he(this,t,null,ws,yt,{})}}function Ss(t){let e,n,s,r,i,o,c,a,u,l,h,p,d,f,g,m,y,v,b,C,w;return{c(){e=xt("i"),e.innerHTML="You are <b>not required</b> to sign-in in order to use <b>visualize-it</b>.",n=xt("br"),s=xt("br"),r=Rt(),i=xt("i"),i.innerHTML="However, signing in with a <b>verified email</b>, gives you access to <b>publish packages</b>!",o=xt("br"),c=xt("br"),a=Rt(),u=xt("form"),l=xt("label"),h=xt("b"),h.textContent="Email:",p=Rt(),d=xt("input"),f=Rt(),g=xt("div"),m=Et(t[2]),y=Rt(),v=xt("button"),b=Et(t[4]),At(d,"type","text"),At(d,"autocomplete","email"),d.autofocus=!0,At(g,"class","error svelte-1jyck17"),v.value="submit",At(u,"onsubmit","return false;")},m($,k){kt($,e,k),kt($,n,k),kt($,s,k),kt($,r,k),kt($,i,k),kt($,o,k),kt($,c,k),kt($,a,k),kt($,u,k),$t(u,l),$t(l,h),$t(l,p),$t(l,d),Tt(d,t[1]),t[12](d),$t(u,f),$t(u,g),$t(g,m),$t(u,y),$t(u,v),$t(v,b),d.focus(),C||(w=[Ot(d,"input",t[11]),Ot(v,"click",t[6])],C=!0)},p(t,e){2&e&&d.value!==t[1]&&Tt(d,t[1]),4&e&&Nt(m,t[2]),16&e&&Nt(b,t[4])},d(l){l&&St(e),l&&St(n),l&&St(s),l&&St(r),l&&St(i),l&&St(o),l&&St(c),l&&St(a),l&&St(u),t[12](null),C=!1,gt(w)}}}function xs(t){let e,n,s,r,i,o,c,a,u,l,h,p,d,f,g,m,y,v,b,C,w,$,k,S,x=t[5].inSignInVerificationPhase+"";return{c(){e=xt("i"),n=Et("A sign-in verification code has been sent to your email: "),s=Et(x),r=xt("br"),i=xt("br"),o=Rt(),c=xt("form"),a=xt("label"),u=xt("b"),u.textContent="Code:",l=Rt(),h=xt("input"),p=Rt(),d=xt("i"),d.innerHTML="enter your <b>Verification Code</b> here",f=Rt(),g=xt("div"),m=Et(t[2]),y=Rt(),v=xt("button"),v.textContent="Verify",b=Rt(),C=xt("button"),C.textContent="Resend Code",w=Rt(),$=xt("button"),$.textContent="Cancel",At(h,"type","text"),At(g,"class","error svelte-1jyck17"),v.value="submit",At(c,"onsubmit","return false;")},m(x,E){kt(x,e,E),$t(e,n),$t(e,s),kt(x,r,E),kt(x,i,E),kt(x,o,E),kt(x,c,E),$t(c,a),$t(a,u),$t(a,l),$t(a,h),Tt(h,t[3]),$t(a,p),$t(a,d),$t(c,f),$t(c,g),$t(g,m),$t(c,y),$t(c,v),$t(c,b),$t(c,C),$t(c,w),$t(c,$),k||(S=[Ot(h,"input",t[10]),Ot(v,"click",t[7]),Ot(C,"click",t[8]),Ot($,"click",t[9])],k=!0)},p(t,e){32&e&&x!==(x=t[5].inSignInVerificationPhase+"")&&Nt(s,x),8&e&&h.value!==t[3]&&Tt(h,t[3]),4&e&&Nt(m,t[2])},d(t){t&&St(e),t&&St(r),t&&St(i),t&&St(o),t&&St(c),k=!1,gt(S)}}}function Es(t){let e,n,s,r;function i(t,e){return t[5].inSignInVerificationPhase?xs:Ss}let o=i(t),c=o(t);return{c(){e=xt("div"),n=xt("h4"),n.textContent="Welcome to visualize-it!",s=Rt(),r=xt("div"),c.c(),At(r,"class","indent svelte-1jyck17")},m(t,i){kt(t,e,i),$t(e,n),$t(e,s),$t(e,r),c.m(r,null)},p(t,[e]){o===(o=i(t))&&c?c.p(t,e):(c.d(1),c=o(t),c&&(c.c(),c.m(r,null)))},i:pt,o:pt,d(t){t&&St(e),c.d()}}}function Rs(t,e,n){let s,r,i;Ct(t,Pe,(t=>n(5,i=t)));const o=Fe("vit:client:SignIn");let c,a,u="";return t.$$.update=()=>{2&t.$$.dirty&&n(1,s=s?s.includes("@")?s:`${s}@gmail.com`:""),2&t.$$.dirty&&n(4,r=s?"Sign In":"Register"),3&t.$$.dirty&&s&&1===s.indexOf("@")&&setTimeout((()=>{c.setSelectionRange(1,1)}),1)},[c,s,u,a,r,i,async function(){try{await Pe.signIn(s),n(2,u="")}catch(t){t.isExpected()?n(2,u=t.userMsg):(n(2,u="Unexpected error in SignIn process ... see logs for detail"),o.v(`*** ERROR *** Unexpected error in SignIn process: ${t}`,t))}},async function(){try{await Pe.signInVerification(a),n(2,u="")}catch(t){t.isExpected()?n(2,u=t.userMsg):(n(2,u="Unexpected error in SignIn process ... see logs for detail"),o.v(`*** ERROR *** Unexpected error in SignIn process: ${t}`,t))}},async function(){try{await Pe.signInVerificationResendCode(),n(2,u="")}catch(t){t.isExpected()?n(2,u=t.userMsg):(n(2,u="Unexpected error in signInVerificationResendCode process ... see logs for detail"),o.v(`*** ERROR *** Unexpected error in signInVerificationResendCode process: ${t}`,t))}},function(){try{Pe.signInVerificationCancel(),n(2,u="")}catch(t){t.isExpected()?n(2,u=t.userMsg):(n(2,u="Unexpected error in signInVerificationCancel process ... see logs for detail"),o.v(`*** ERROR *** Unexpected error in signInVerificationCancel process: ${t}`,t))}},function(){a=this.value,n(3,a)},function(){s=this.value,n(1,s)},function(t){Dt[t?"unshift":"push"]((()=>{c=t,n(0,c)}))}]}class Is extends pe{constructor(t){super(),he(this,t,Rs,Es,yt,{})}}function Os(t){let e,n,s,r,i,o,c,a,u,l,h,p,d,f,g,m,y,v,b,C,w,$,k,S,x,E,R,I;return{c(){e=xt("div"),n=xt("h4"),n.textContent="Welcome to visualize-it!",s=Rt(),r=xt("div"),i=Et("Some "),o=xt("b"),o.textContent="systems",c=Et(" require a "),a=xt("b"),a.textContent="Guest Name",u=Rt(),l=xt("i"),l.textContent="(when not signed-in)",h=Et(", that identifies you to other participants."),p=xt("br"),d=xt("br"),f=Rt(),g=xt("form"),m=xt("label"),y=xt("b"),y.textContent="Guest Name:",v=Rt(),b=xt("input"),C=Rt(),w=xt("i"),w.textContent="blank out to clear prior Guest Name",$=Rt(),k=xt("div"),S=Et(t[1]),x=Rt(),E=xt("button"),E.textContent="Register",At(b,"type","text"),At(b,"autocomplete","nickname"),At(k,"class","error svelte-1jyck17"),E.value="submit",At(g,"onsubmit","return false;"),At(r,"class","indent svelte-1jyck17")},m(O,_){kt(O,e,_),$t(e,n),$t(e,s),$t(e,r),$t(r,i),$t(r,o),$t(r,c),$t(r,a),$t(r,u),$t(r,l),$t(r,h),$t(r,p),$t(r,d),$t(r,f),$t(r,g),$t(g,m),$t(m,y),$t(m,v),$t(m,b),Tt(b,t[0]),$t(m,C),$t(m,w),$t(g,$),$t(g,k),$t(k,S),$t(g,x),$t(g,E),R||(I=[Ot(b,"input",t[3]),Ot(E,"click",t[2])],R=!0)},p(t,[e]){1&e&&b.value!==t[0]&&Tt(b,t[0]),2&e&&Nt(S,t[1])},i:pt,o:pt,d(t){t&&St(e),R=!1,gt(I)}}}function _s(t,e,n){let s;Ct(t,Pe,(t=>n(4,s=t)));const r=Fe("vit:client:RegisterGuest");let i=s.guestName,o="";return[i,o,async function(){try{await Pe.registerGuest(i),n(1,o="")}catch(t){t.isExpected()?n(1,o=t.userMsg):(n(1,o="Unexpected error in Guest Registration process ... see logs for detail"),r.v(`*** ERROR *** Unexpected error in Guest Registration process: ${t}`,t))}},function(){i=this.value,n(0,i)}]}class As extends pe{constructor(t){super(),he(this,t,_s,Os,yt,{})}}function Ns(t){let e,n,s;return{c(){e=xt("a"),e.textContent="Profile",At(e,"href",null),At(e,"class","svelte-dizxli")},m(r,i){kt(r,e,i),n||(s=Ot(e,"click",_t(t[7])),n=!0)},p:pt,d(t){t&&St(e),n=!1,s()}}}function Ts(t){let e,n,s;return{c(){e=xt("a"),e.textContent="Register Guest",At(e,"href",null),At(e,"class","svelte-dizxli")},m(r,i){kt(r,e,i),n||(s=Ot(e,"click",_t((function(){mt(t[2])&&t[2].apply(this,arguments)}))),n=!0)},p(e,n){t=e},d(t){t&&St(e),n=!1,s()}}}function Fs(t){let e,n,s;return{c(){e=xt("a"),e.textContent="Sign In",At(e,"href",null),At(e,"class","svelte-dizxli")},m(r,i){kt(r,e,i),n||(s=Ot(e,"click",_t((function(){mt(t[0])&&t[0].apply(this,arguments)}))),n=!0)},p(e,n){t=e},d(t){t&&St(e),n=!1,s()}}}function Ls(t){let e,n,s;return{c(){e=xt("a"),e.textContent="Verify Sign In",At(e,"href",null),At(e,"class","svelte-dizxli")},m(r,i){kt(r,e,i),n||(s=Ot(e,"click",_t((function(){mt(t[0])&&t[0].apply(this,arguments)}))),n=!0)},p(e,n){t=e},d(t){t&&St(e),n=!1,s()}}}function Ms(t){let e,n,s;return{c(){e=xt("a"),e.textContent="Sign Out",At(e,"href",null),At(e,"class","svelte-dizxli")},m(r,i){kt(r,e,i),n||(s=Ot(e,"click",_t((function(){mt(t[1])&&t[1].apply(this,arguments)}))),n=!0)},p(e,n){t=e},d(t){t&&St(e),n=!1,s()}}}function Us(t){let e,n,s,r,i,o,c,a,u,l,h,p,d=t[5].getUserName()+"",f=t[5].isSignedIn(),g=!t[5].isSignedIn(),m=!t[5].isSignedIn()&&!t[5].inSignInVerificationPhase,y=t[5].isSignedIn(),v=f&&Ns(t),b=g&&Ts(t),C=m&&Fs(t),w=t[5].inSignInVerificationPhase&&Ls(t),$=y&&Ms(t);return{c(){e=xt("div"),n=xt("button"),s=Et("User: "),r=Et(d),i=Rt(),o=xt("div"),v&&v.c(),c=Rt(),b&&b.c(),a=Rt(),C&&C.c(),u=Rt(),w&&w.c(),l=Rt(),$&&$.c(),At(n,"class","dropbtn svelte-dizxli"),At(o,"class","dropdown-content svelte-dizxli"),Mt(o,"show",t[4]),At(e,"class","dropdown svelte-dizxli")},m(d,f){kt(d,e,f),$t(e,n),$t(n,s),$t(n,r),$t(e,i),$t(e,o),v&&v.m(o,null),$t(o,c),b&&b.m(o,null),$t(o,a),C&&C.m(o,null),$t(o,u),w&&w.m(o,null),$t(o,l),$&&$.m(o,null),t[8](o),h||(p=Ot(n,"click",t[6]),h=!0)},p(t,[e]){32&e&&d!==(d=t[5].getUserName()+"")&&Nt(r,d),32&e&&(f=t[5].isSignedIn()),f?v?v.p(t,e):(v=Ns(t),v.c(),v.m(o,c)):v&&(v.d(1),v=null),32&e&&(g=!t[5].isSignedIn()),g?b?b.p(t,e):(b=Ts(t),b.c(),b.m(o,a)):b&&(b.d(1),b=null),32&e&&(m=!t[5].isSignedIn()&&!t[5].inSignInVerificationPhase),m?C?C.p(t,e):(C=Fs(t),C.c(),C.m(o,u)):C&&(C.d(1),C=null),t[5].inSignInVerificationPhase?w?w.p(t,e):(w=Ls(t),w.c(),w.m(o,l)):w&&(w.d(1),w=null),32&e&&(y=t[5].isSignedIn()),y?$?$.p(t,e):($=Ms(t),$.c(),$.m(o,null)):$&&($.d(1),$=null),16&e&&Mt(o,"show",t[4])},i:pt,o:pt,d(n){n&&St(e),v&&v.d(),b&&b.d(),C&&C.d(),w&&w.d(),$&&$.d(),t[8](null),h=!1,p()}}}function Bs(t,e,n){let s;Ct(t,Pe,(t=>n(5,s=t)));let r,{handleSignIn:i}=e,{handleSignOut:o}=e,{handleRegisterGuest:c}=e,a=!1;window.onclick=function(t){t.target.matches(".dropbtn")||n(4,a=!1)};return t.$$set=t=>{"handleSignIn"in t&&n(0,i=t.handleSignIn),"handleSignOut"in t&&n(1,o=t.handleSignOut),"handleRegisterGuest"in t&&n(2,c=t.handleRegisterGuest)},[i,o,c,r,a,s,function(){n(4,a=!a)},()=>me.display("User Profile will be implemented LATER"),function(t){Dt[t?"unshift":"push"]((()=>{r=t,n(3,r)}))}]}class Ps extends pe{constructor(t){super(),he(this,t,Bs,Us,yt,{handleSignIn:0,handleSignOut:1,handleRegisterGuest:2})}}const js=Fe("vit:client:util:longpress");function Ds(t,e=500){js("USING longpress action");let n=null;function s(){js("in handleMouseDown()"),n=setTimeout(i,e)}function r(){null!==n&&(js("canceling longpress processing"),clearTimeout(n),n=null)}function i(){js('timeout has occurred ... emitting "longpress" CustomEvent'),t.dispatchEvent(new CustomEvent("longpress")),n=null}return js('activating "mousedown/mouseup" event to implement "longpress"'),t.addEventListener("mousedown",s),t.addEventListener("mouseup",r),{destroy(){js("cleaning up longpress action"),t.removeEventListener("mousedown",s),t.removeEventListener("mouseup",r)}}}function Vs(t){let e,n,s;return{c(){e=xt("b"),e.textContent="IDE",At(e,"class","link svelte-1p1s816")},m(r,i){kt(r,e,i),n||(s=Ot(e,"click",t[8]),n=!0)},p:pt,d(t){t&&St(e),n=!1,s()}}}function qs(t){let e;return{c(){e=xt("b"),e.textContent="IDE",At(e,"class","active svelte-1p1s816")},m(t,n){kt(t,e,n)},p:pt,d(t){t&&St(e)}}}function zs(t){let e,n,s;return{c(){e=xt("b"),e.textContent="System",At(e,"class","link svelte-1p1s816")},m(r,i){kt(r,e,i),n||(s=Ot(e,"click",t[9]),n=!0)},p:pt,d(t){t&&St(e),n=!1,s()}}}function Hs(t){let e;return{c(){e=xt("b"),e.textContent="System",At(e,"class","active svelte-1p1s816")},m(t,n){kt(t,e,n)},p:pt,d(t){t&&St(e)}}}function Gs(t){return{c:pt,m:pt,p:pt,d:pt}}function Ws(t){let e,n,s;return{c(){e=xt("b"),e.textContent="Chat",At(e,"class","link svelte-1p1s816")},m(r,i){kt(r,e,i),n||(s=Ot(e,"click",t[10]),n=!0)},p:pt,d(t){t&&St(e),n=!1,s()}}}function Ys(t){let e;return{c(){e=xt("b"),e.textContent="Chat",At(e,"class","active svelte-1p1s816")},m(t,n){kt(t,e,n)},p:pt,d(t){t&&St(e)}}}function Js(t){let e,n,s;return{c(){e=xt("b"),e.textContent="Admin",At(e,"class","link svelte-1p1s816")},m(r,i){kt(r,e,i),n||(s=Ot(e,"click",t[11]),n=!0)},p:pt,d(t){t&&St(e),n=!1,s()}}}function Ks(t){let e;return{c(){e=xt("b"),e.textContent="Admin",At(e,"class","active svelte-1p1s816")},m(t,n){kt(t,e,n)},p:pt,d(t){t&&St(e)}}}function Xs(t){let e,n,s,r,i,o,c,a,u,l,h,p,d,f,g,m,y,v,b,C,w,$;function k(t,e){return t[0]===gn?qs:Vs}let S=k(t),x=S(t);function E(t,e){return t[0]===Wn?Hs:zs}let R=E(t),I=R(t);function O(t,e){return t[0]===os?Ys:t[1].isActive?Ws:Gs}let _=O(t),A=_(t);function N(t,e){return t[0]===ks?Ks:t[2].enablement.admin?Js:void 0}let T=N(t),F=T&&T(t);h=new Ps({props:{handleSignIn:t[4],handleSignOut:t[6],handleRegisterGuest:t[5]}});var L=t[0];return L&&(v=new L({})),{c(){e=xt("div"),n=xt("b"),s=xt("i"),s.textContent="visualize-it",r=Rt(),i=xt("i"),i.textContent="(ver 0.3)",o=Et("\r\n     \r\n     \r\n     \r\n\r\n  \r\n     \r\n  "),x.c(),c=Et("  \r\n\r\n  \r\n     \r\n  "),I.c(),a=Et("  \r\n\r\n  \r\n     \r\n  "),A.c(),u=Et("  \r\n\r\n  \r\n     \r\n  "),F&&F.c(),l=Et("  \r\n\r\n  \r\n     \r\n     \r\n     \r\n     \r\n  "),ce(h.$$.fragment),p=Rt(),d=xt("div"),f=xt("i"),g=Et(t[3]),m=Et(" "),y=Rt(),v&&ce(v.$$.fragment),b=It(),At(f,"class","alert svelte-1p1s816")},m(k,S){var E;kt(k,e,S),$t(e,n),$t(n,s),$t(e,r),$t(e,i),$t(e,o),x.m(e,null),$t(e,c),I.m(e,null),$t(e,a),A.m(e,null),$t(e,u),F&&F.m(e,null),$t(e,l),ae(h,e,null),$t(e,p),$t(e,d),$t(d,f),$t(f,g),$t(f,m),kt(k,y,S),v&&ae(v,k,S),kt(k,b,S),C=!0,w||($=[(E=Ds.call(null,s,2e3),E&&mt(E.destroy)?E.destroy:pt),Ot(s,"longpress",t[7])],w=!0)},p(t,[n]){if(S===(S=k(t))&&x?x.p(t,n):(x.d(1),x=S(t),x&&(x.c(),x.m(e,c))),R===(R=E(t))&&I?I.p(t,n):(I.d(1),I=R(t),I&&(I.c(),I.m(e,a))),_===(_=O(t))&&A?A.p(t,n):(A.d(1),A=_(t),A&&(A.c(),A.m(e,u))),T===(T=N(t))&&F?F.p(t,n):(F&&F.d(1),F=T&&T(t),F&&(F.c(),F.m(e,l))),(!C||8&n)&&Nt(g,t[3]),L!==(L=t[0])){if(v){te();const t=v;se(t.$$.fragment,1,0,(()=>{ue(t,1)})),ee()}L?(v=new L({}),ce(v.$$.fragment),ne(v.$$.fragment,1),ae(v,b.parentNode,b)):v=null}},i(t){C||(ne(h.$$.fragment,t),v&&ne(v.$$.fragment,t),C=!0)},o(t){se(h.$$.fragment,t),v&&se(v.$$.fragment,t),C=!1},d(t){t&&St(e),x.d(),I.d(),A.d(),F&&F.d(),ue(h),t&&St(y),t&&St(b),v&&ue(v,t),w=!1,gt($)}}}function Zs(t,e,n){let s,r,i;Ct(t,He,(t=>n(1,s=t))),Ct(t,Pe,(t=>n(2,r=t))),Ct(t,me,(t=>n(3,i=t)));const o=Fe("vit:client:main:IDE:Router");let c=gn;return t.$$.update=()=>{7&t.$$.dirty&&(c===Is&&r.isSignedIn()?n(0,c=gn):(r.enablement.admin||c!==ks)&&(s.isActive||c!==os)||n(0,c=gn))},[c,s,r,i,function(){n(0,c=Is)},function(){n(0,c=As)},async function(){try{await Pe.signOut(),n(0,c=Is)}catch(t){t.isExpected()?me.display(t.userMsg):(me.display("Unexpected error in SignOut process ... see logs for detail"),o.v(`*** ERROR *** Unexpected error in SignOut process: ${t}`,t))}},function(){o("handleEasterEgg ... longpress event occurred!"),He.solicitPrivateMsg()},()=>n(0,c=gn),()=>n(0,c=Wn),()=>n(0,c=os),()=>n(0,c=ks)]}class Qs extends pe{constructor(t){super(),he(this,t,Zs,Xs,yt,{})}}function tr(t){let e,n,s;return n=new Qs({}),{c(){e=xt("main"),ce(n.$$.fragment),At(e,"class","svelte-102bp21")},m(t,r){kt(t,e,r),ae(n,e,null),s=!0},p:pt,i(t){s||(ne(n.$$.fragment,t),s=!0)},o(t){se(n.$$.fragment,t),s=!1},d(t){t&&St(e),ue(n)}}}!function(t){const e=un?"http://localhost:5000":void 0;ln.f(`setupSocketConnection() making client socket connection to server: ${e||"production host of our client"}, using clientType: '${t}'`);const n=ht(e,{auth:{clientType:t}});var s;n.on("connect",(()=>{ln(`client's socket connection to server is now established: ${n.id} / connected: ${n.connected}`),me.display("Our server connection is now up and running.")})),n.on("disconnect",(t=>{ln(`client's socket connection to server has been lost: ${n.id} / connected: ${n.connected} ???? reason: ${t}`),me.display("Our server connection has been lost.")})),s=n,Ue("registerUserSocketHandlers(socket)"),je=s,je.on("get-device-id",(t=>t({value:ve()}))),je.on("reset-device-id",(t=>t({value:(localStorage.removeItem(ye),ve())}))),je.on("get-auth-token",(t=>t({value:localStorage.getItem("token")}))),je.on("pre-authentication",((t,e)=>{Pe.preAuthComplete(t,e)})),je.on("user-auth-changed",(t=>{Pe.userAuthChanged(t)})),je.on("set-temp-entry",((t,e,n)=>(localStorage.setItem(t,e),setTimeout((()=>{localStorage.removeItem(t)}),3e3),n()))),je.on("get-temp-entry",((t,e)=>{let n=localStorage.getItem(t);if(n)return e({value:n});setTimeout((()=>(n=localStorage.getItem(t),n&&Ue.f(`'get-temp-entry' FALSE-POSITIVE identity theft AVOIDED ... for key: '${t}', returning: '${n}'`),e({value:n}))),20)})),function(t){Ve("here we are in registerChatSocketHandlers"),Ge=t,Ge.on("private-msg-connect",((t,e)=>{He.connect(t,e)})),Ge.on("private-msg",((t,e,n)=>{He.receiveMsg(n,e)})),Ge.on("private-msg-disconnect",(t=>{He.disconnected(t)})),Ge.on("msg-from-server",((t,e)=>{e&&Ve.f(e),me.display(t)}))}(n),function(t){Je("here we are in registerSystemStoreSocketHandlers"),rn=t,rn.on("system-tick",((t,e)=>{const n=Fe("vit:client:system:system-tick");n(`processing - sysId: '${t}'`);const s=sn(t);if(!s)return function(t){const s='*** USER ERROR *** in "system-tick" event';n(`${s} ... ${t}`),e({errMsg:s,userMsg:t})}(`'sys-tick" event - sysId: ${t} is NOT recognized by this client (something is out-of-sync) :-(`);const r=bt(s).model,i=bt(Pe);let o={};return Object.entries(r).forEach((([t,e])=>{"valve"===e.type&&e.open&&t[0].toLowerCase()===i.getUserName()[0].toLowerCase()&&(o[`${t}.pres`]=e.pres+10)})),o={...o,...s.extractLocalStateChange()},e({value:o})})),rn.on("system-run-changed",((t,e)=>{Je(`processing 'system-run-changed' event - sysId: '${t}', running: ${e}`);const n=sn(t);n?(n.runChanged(e),me.display(`System '${t}' is now ${e?"running":"paused"}!`)):Je(`sysId: '${t}' does NOT exist ... no-oping`)})),rn.on("system-state-changed",((t,e)=>{Je(`processing 'system-state-changed' event - sysId: '${t}', stateChanges: `,e);const n=sn(t);n?n.stateChanged(e):Je(`sysId: '${t}' does NOT exist ... no-oping`)})),rn.on("system-participants-changed",((t,e,n)=>{Je(`processing 'system-participants-changed' event - sysId: '${t}', userMsg: ${e}, participants: ${n}`);const s=sn(t);s?(s.participantsChanged(n),me.display(e)):Je(`sysId: '${t}' does NOT exist ... no-oping`)}))}(n),function(t){We("here we are in registerSystemSocketHandlers"),Ye=t}(n),an(n)}("ide");return new class extends pe{constructor(t){super(),he(this,t,null,tr,yt,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
